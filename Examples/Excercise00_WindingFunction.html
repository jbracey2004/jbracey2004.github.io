<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, height=device-height, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<title>Portfolio - Winding Function</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r83/three.min.js"></script>
		<script src="../controls/OrbitControls.js"></script>
		<script src="../plotter.js"></script>
		<script>
			var pt = 0;
			var ct = 0;

			var p5objCanvas;
			var canvasMain;
			var t3jsRender;
			var t3sceneMain;
			var t3cameraMain;
			var t3lightMain;
			var t3CamControls;

			var graphWaveform;

			function setup() {
				var szWin = sizeWindow();
				console.log(szWin);
				p5objCanvas = createCanvas(szWin.width, szWin.height);
				canvasMain = document.getElementById(p5objCanvas.id());
				graphWaveform = new plotArea2D(canvasMain);
			}

			function animate() {
				var tn = new Date(Date.now()).getTime() * 0.001;
				if (pt == 0) { pt = tn; }
				var t = tn - pt;
				ct += t;

				pt = tn;
			}

			function mouseDragged()
			{
				var mouseCurrent = { X: mouseX, Y: mouseY };
				var mousePrev = { X: pmouseX, Y: pmouseY };
				var mouseMove = { X: mouseCurrent.X - mousePrev.X, Y: mouseCurrent.Y - mousePrev.Y };
				if (mouseButton === LEFT) {
					if (graphWaveform.ContainsMousePointer()) {
						var pos = graphWaveform.PlotPosCenter();
						var units = graphWaveform.ClientUnitToPlotUnit();
						pos.X -= units.X * mouseMove.X;
						pos.Y -= units.Y * mouseMove.Y;
						graphWaveform.PlotPosCenter(pos);
						return false;
					}
				}
			}

			function draw() {
				animate();
				background("#102010");
				graphWaveform.DrawAxis_Rect("#CCCCCCFF", 2, 8, 16);
				graphWaveform.DrawBorder("#40FF4080", 4);
			}

			function windowResized() {
				var szWin = sizeWindow();
				resizeCanvas(szWin.width, szWin.height);
				console.log(szWin);
			}

			function sizeWindow() {
				var w = windowWidth - 16;
				var h = windowHeight - 16;
				var a = w / h;
				return { width: w, height: h, aspect: a };
			}
		</script>

	</head>

	<body scrolling="no" style="overflow: hidden;">
	</body>

</html>